/*!
 * epage-core v0.1.0
 * (c) 2020-present Chengzi
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vuex")):"function"==typeof define&&define.amd?define("EpageCore",["vuex"],t):"object"==typeof exports?exports.EpageCore=t(require("vuex")):e.EpageCore=t(e.Vuex)}(window,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(16),n(4)],void 0===(o="function"==typeof(r=function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getRootSchemaChildren",{enumerable:!0,get:function(){return t.getRootSchemaChildren}}),Object.defineProperty(e,"getParentListByKey",{enumerable:!0,get:function(){return t.getParentListByKey}}),Object.defineProperty(e,"getIndexByKey",{enumerable:!0,get:function(){return t.getIndexByKey}}),Object.defineProperty(e,"replaceSchemaKey",{enumerable:!0,get:function(){return t.replaceSchemaKey}}),Object.defineProperty(e,"flattenSchema",{enumerable:!0,get:function(){return t.flattenSchema}}),Object.defineProperty(e,"getWidgetType",{enumerable:!0,get:function(){return t.getWidgetType}}),Object.defineProperty(e,"getWidgetModel",{enumerable:!0,get:function(){return t.getWidgetModel}}),Object.defineProperty(e,"setKeyAndName",{enumerable:!0,get:function(){return t.setKeyAndName}}),Object.defineProperty(e,"getFormData",{enumerable:!0,get:function(){return t.getFormData}}),Object.defineProperty(e,"getSchema",{enumerable:!0,get:function(){return t.getSchema}}),Object.defineProperty(e,"mergeWidgets",{enumerable:!0,get:function(){return t.mergeWidgets}}),Object.defineProperty(e,"mergeWidget",{enumerable:!0,get:function(){return t.mergeWidget}}),Object.defineProperty(e,"setValidators",{enumerable:!0,get:function(){return t.setValidators}}),Object.defineProperty(e,"updateRequiredRule",{enumerable:!0,get:function(){return t.updateRequiredRule}}),Object.defineProperty(e,"getSchemaType",{enumerable:!0,get:function(){return t.getSchemaType}}),Object.defineProperty(e,"getRequiredRuleType",{enumerable:!0,get:function(){return t.getRequiredRuleType}}),Object.defineProperty(e,"getRuleValidator",{enumerable:!0,get:function(){return t.getRuleValidator}}),Object.defineProperty(e,"usePlugins",{enumerable:!0,get:function(){return t.usePlugins}}),Object.defineProperty(e,"randomStr",{enumerable:!0,get:function(){return n.randomStr}}),Object.defineProperty(e,"isPlainObject",{enumerable:!0,get:function(){return n.isPlainObject}}),Object.defineProperty(e,"isFunction",{enumerable:!0,get:function(){return n.isFunction}}),Object.defineProperty(e,"isString",{enumerable:!0,get:function(){return n.isString}}),Object.defineProperty(e,"isNumber",{enumerable:!0,get:function(){return n.isNumber}}),Object.defineProperty(e,"jsonClone",{enumerable:!0,get:function(){return n.jsonClone}}),Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return n.isArray}}),Object.defineProperty(e,"ajax",{enumerable:!0,get:function(){return n.ajax}}),Object.defineProperty(e,"isNotEmptyString",{enumerable:!0,get:function(){return n.isNotEmptyString}}),Object.defineProperty(e,"include",{enumerable:!0,get:function(){return n.include}}),Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return n.debounce}}),Object.defineProperty(e,"getValueType",{enumerable:!0,get:function(){return n.getValueType}}),Object.defineProperty(e,"checkValueType",{enumerable:!0,get:function(){return n.checkValueType}}),Object.defineProperty(e,"formatDate",{enumerable:!0,get:function(){return n.formatDate}}),Object.defineProperty(e,"isNumberString",{enumerable:!0,get:function(){return n.isNumberString}}),Object.defineProperty(e,"copy",{enumerable:!0,get:function(){return n.copy}})})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(0)],void 0===(o="function"==typeof(r=function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=["list"],a=function(){function e(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{},i=r.schema;this.key=(0,t.randomStr)(),this.widget="",this.hidden=!1,this.option={},this.create(n),this.widget||(this.widget=(this instanceof e?this.constructor:void 0)?(this instanceof e?this.constructor:void 0).widget:i?i.widget:"")}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"create",value:function(e){var n=e||{},i=n.schema,o=n.clone;if((0,t.isPlainObject)(i)){for(var a in i)if(!(0,t.include)(u,a)&&a in this){var c=i[a];(0,t.isArray)(c)?c=(0,t.jsonClone)(c):(0,t.isPlainObject)(c)&&(c=(0,t.isPlainObject)(this[a])?(0,t.jsonClone)(r(r({},this[a]),c)):(0,t.jsonClone)(c)),this[a]=c}!o&&this.key||(this.key=(0,t.randomStr)())}}}]),e}();e.default=a})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(28)],void 0===(o="function"==typeof(r=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=function(e){return e&&e.__esModule?e:{default:e}}(t),e.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.key="",this.properties=[new t.default("hidden",!1),new t.default("disabled",!1)]}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(15),n(17)],void 0===(o="function"==typeof(r=function(e,t,n){"use strict";function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=function(e){return e&&e.__esModule?e:{default:e}}(t),n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(n),t.default.set(n);var i=t.default;e.default=i})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return"function"==typeof e}function r(e){return"string"==typeof e}function i(e){return Array.isArray(e)}function o(e,t){return-1!==e.indexOf(t)}function u(e){return{}.toString.call(e).slice(8).split("]")[0].toLowerCase()}function a(e,t){var n=t.match(/array<([^<>]+)>/);if("array"===t)return!0;if(!n||!n[1])return!1;var r=n[1];return e.filter(function(e){return u(e)===r}).length===e.length}function c(e){if(!e||"object"!==t(e)||"[object Object]"!=={}.toString.call(e))return!1;var n=Object.getPrototypeOf(e);if(null===n)return!0;var r=hasOwnProperty.call(n,"constructor")&&n.constructor;return"function"==typeof r}Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=n,e.isString=r,e.isNumber=function(e){return"number"==typeof e},e.isArray=i,e.jsonClone=function(e){return JSON.parse(JSON.stringify(e))},e.include=o,e.getValueType=u,e.checkValueType=function e(t,n,r){var c=u(t);return r?"array"===c&&t.filter(function(t){return e(t,n,!1)}).length===t.length:"array"===c?i(n)?!!n.filter(function(e){return a(t,e)}).length:a(t,n):i(n)?o(n,c):c===n},e.randomStr=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return"k"+t},e.isPlainObject=c,e.isNotEmptyString=function(e){return!(!r(e)||!e.trim().length)},e.isNumberString=function(e){return"string"==typeof e&&/^-?\d+(.\d+)?$/.test(e)},e.ajax=function(e,t){var r=fetch(e,t).then(function(e){return e.json()});if(t){var i=t.before;n(i)&&(r=r.then(i))}return r},e.debounce=function(e,t,n){var r,i,o,u,a,f,s=0,l=!1,d=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=i;return r=i=void 0,s=t,u=e.apply(o,n)}function g(e){var n=e-f,r=e-s;return void 0===f||n>=t||n<0||d&&r>=o}function h(){var e=Date.now();if(g(e))return m(e);a=setTimeout(h,function(e){var n=e-s,r=t-(e-f);return d?Math.min(r,o-n):r}(e))}function m(e){return a=void 0,y&&r?p(e):(r=i=void 0,u)}function b(){var e=Date.now(),n=g(e);if(r=arguments,i=this,f=e,n){if(void 0===a)return function(e){return s=e,a=setTimeout(h,t),l?p(e):u}(f);if(d)return clearTimeout(a),a=setTimeout(h,t),p(f)}return void 0===a&&(a=setTimeout(h,t)),u}return t=parseInt(t,10)||0,c(n)&&(l=!!n.leading,o=(d="maxWait"in n)?Math.max(parseInt(n.maxWait)||0,t):o,y="trailing"in n?!!n.trailing:y),b.cancel=function(){void 0!==a&&clearTimeout(a),s=0,r=f=i=a=void 0},b.flush=function(){return void 0===a?u:m(Date.now()())},b},e.formatDate=function(e,t){var n=e instanceof Date?e:new Date,r=n.getFullYear(),i=n.getMonth()+1,o=n.getDate(),u=n.getMinutes(),a=n.getHours(),c=n.getSeconds(),f=function(e){var t=e+"";return 1===t.length?"0"+t:t};return r=f(r),i=f(i),o=f(o),u=f(u),a=f(a),c=f(c),(t||"yyyy-MM-dd").replace("yyyy",r).replace("MM",i).replace("dd",o).replace("HH",a).replace("mm",u).replace("ss",c)},e.copy=function(e){var t=document.createElement("textArea");t.setAttribute("style","position: absolute;z-index: -1;height: 0;width: 0;"),document.body.appendChild(t),t.value=e,t.select();var n=document.execCommand("copy","false",null);return new Promise(function(r,i){n?r(e):i(new Error("error")),document.body.removeChild(t)})}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(0)],void 0===(o="function"==typeof(r=function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.types={string:function(){return""},boolean:function(){return!1},number:function(){return 0},array:function(){return[]},object:function(){return{}},null:function(){return null},date:function(){return new Date},"array<date>":function(){return[]},"array<string>":function(){return[]},"array<number>":function(){return[]},"array<boolean>":function(){return[]}},this.add(t),this.convert={}}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(e,[{key:"add",value:function(e){if((0,t.isPlainObject)(e))for(var n in e){var r=e[n];n in this.types||!(0,t.isFunction)(r)||(this.types[n]=r)}}}]),e}();e.default=r,r.convert={string2number:function(e){var t=parseFloat(e);return isNaN(t)?null:t},string2boolean:function(e){return!!e},number2string:function(e){var t=String(e);return"[object Object]"===t?null:t},number2boolean:function(e){return!!e},boolean2string:function(e){return String(e)},boolean2number:function(e){return Number(e)}},r.resolve=function(e,t){var n=e.match(/<(\w+)>/);return t?e.split("<")[0]:n?n[1].toLowerCase():e.toLowerCase()}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={};["$TAB_UPDATE","$WIDGETS_SET","$ROOT_SCHEMA_SET","$ROOT_SCHEMA_FLAT","$MODEL_SET","$MODE_CHANGE","$LOGIC_ADD","$LOGIC_UPDATE","$LOGIC_DELETE","$RULE_INIT","$RULE_TYPE_UPDATE","$RULE_REQUIRED_RULE_UPDATE","$RULE_MESSAGE_UPDATE","$RULE_ADD","$RULE_REMOVE","$WIDGET_UPDATE_BY_VALUE_LOGIC","$WIDGET_UPDATE_BY_EVENT_LOGIC","$WIDGET_ADD","$WIDGET_REMOVE","$WIDGET_DYNAMIC_ADD","$WIDGET_DYNAMIC_REMOVE","$WIDGET_COPY","$WIDGET_TYPE_UPDATE","$WIDGET_OPTION_UPDATE","$WIDGET_SELECT","$WIDGET_DESELECT","$WIDGET_CHILD_ADD","$WIDGET_CHILD_REMOVE","$WIDGET_CHILD_MOVE"].forEach(function(e){return t[e]=e});var n=t;e.default=n})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(8),n(26)],void 0===(o="function"==typeof(r=function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"modes",{enumerable:!0,get:function(){return t.modes}}),Object.defineProperty(e,"defaultSchema",{enumerable:!0,get:function(){return n.default}}),n=function(e){return e&&e.__esModule?e:{default:e}}(n)})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IVIEW_V3=e.IVIEW_V2=e.modes=void 0,e.modes=function(){return["edit","display"]},e.IVIEW_V2=2,e.IVIEW_V3=3})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(27)],void 0===(o="function"==typeof(r=function(e,t){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=o(e);if(t){var u=o(this).constructor;r=Reflect.construct(i,arguments,u)}else r=i.apply(this,arguments);return function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,r)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(n,e);var t=i(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this)).title="",r.description="",r.size="default",r.container=!0,r.children=[{span:24,list:[]}],r.logics=[],r.label={width:80,position:"right",colon:!1},r.style={maxWidth:1600},r.create(e),r.createChildren(e),r}return n}((t=function(e){return e&&e.__esModule?e:{default:e}}(t)).default);e.default=u})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(2),n(11),n(12),n(29)],void 0===(o="function"==typeof(r=function(e,t,n,r,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=o(t),n=o(n),r=o(r),(i=o(i)).default.Effect=t.default,i.default.EventLogic=n.default,i.default.ValueLogic=r.default;var u=i.default;e.default=u})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(2)],void 0===(o="function"==typeof(r=function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=function(e){return e&&e.__esModule?e:{default:e}}(t);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="event",this.title="事件逻辑",this.map={click:{key:"click",value:"点击"},focus:{key:"focus",value:"聚焦"},blur:{key:"blur",value:"失焦"},change:{key:"change",value:"改变"}}}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(e,[{key:"get",value:function(){return{type:"event",key:"",action:"",effects:[new t.default]}}}]),e}();e.default=r})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(2)],void 0===(o="function"==typeof(r=function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=function(e){return e&&e.__esModule?e:{default:e}}(t);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="value",this.title="逻辑",this.map={"=":{key:"=",value:"等于",validator:function(e,t){return e===t}},">":{key:">",value:"大于",validator:function(e,t){return e>t}},"<":{key:"<",value:"小于",validator:function(e,t){return e<t}},"!=":{key:"!=",value:"不等于",validator:function(e,t){return e!==t}},"<>":{key:"<>",value:"包含",validator:function(e,t){return e.indexOf(t)>-1}},"><":{key:"><",value:"不包含",validator:function(e,t){return-1===e.indexOf(t)}}}}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(e,[{key:"get",value:function(){return{type:"value",key:"",action:"",value:"",effects:[new t.default]}}}]),e}();e.default=r})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(14),n(3),n(23),n(24),n(10),n(0),n(7),n(31)],void 0===(o="function"==typeof(r=function(e,t,n,r,i,o,a,c,f){"use strict";function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Worker",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Rule",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Event",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Store",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Logic",{enumerable:!0,get:function(){return o.default}}),e.schema=e.constant=e.helper=void 0,t=d(t),n=d(n),r=d(r),i=d(i),o=d(o),a=l(a),e.helper=a,c=l(c),e.constant=c,f=l(f),e.schema=f})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.createWorker()}return function(e,n,r){n&&t(e.prototype,n),r&&t(e,r)}(e,[{key:"createWorker",value:function(){var e=new Blob(["("+this.createFunction().toString()+")()"]),t=window.URL.createObjectURL(e);return new Worker(t)}},{key:"createFunction",value:function(){return function(){function e(e){return"[object Object]"===Object.prototype.toString.call(e)}self.util={convert2kv:function(e,t,n){return n?function e(t,i){return r(t)?t.map(function(t){var o=Object.assign({},i(t)),u=r(t[n])?t[n]:[];return o.children=e(u,i),o}):[]}(e,t):e.map(t);function r(e){return Array.isArray(e)}}};var t={fetch:{args:["data"],check:function(t){var n=!0,r="";if(Array.isArray(t)){for(var i=0;i<t.length;i++)if(!(e(t[i])&&"key"in t[i]&&"value"in t[i])){n=!1,r="".concat(t," 在索引 ").concat(i," 不符合格式规范，请转换成[{key: '', value: ''}, ...] 形式并返回");break}}else n=!1,r="需要返回数组";return{success:n,message:r}}},tableFetch:{args:["data"],check:function(t){function n(e){return"number"==typeof e&&e>=0}if(!e(t))return{success:!1,message:"需要返回对象{ page: {}, data: []}"};var r=t.page||{},i=r.current,o=r.size,u=r.total;if(!(e(t.page)&&n(i)&&n(o)&&n(u)))return{success:!1,message:"page 格式不符合规范，应为： { current: Number, size: Number, total: Number }"};for(var a=t.data||[],c=0;c<a.length;c++)if(!e(a[c]))return{success:!1,message:a[c]+" 不符合格式规范"};return{success:!0,message:""}}},custom:{args:["data"],check:function(){return{success:!0,message:""}}}};self.onmessage=function(e){var n={success:!0,message:""},r=e.data,i=r.fn,o=r.action,u=r.data,a=function(e){return e};if(!(o in t))return n={success:!1,message:"action: "+o+" 无法识别，只能为以下其中一种action: \n${Object.keys(actionMap).toString()}"},self.postMessage(n);if(!i)return n={success:!1,message:"请传入 fn 参数"},self.postMessage(n);try{a=function(e,t,n){return(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=Function.bind.apply(e,r),o=new i;return o}).apply(null,arguments)}(Function,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t[o].args).concat([i]))}catch(e){return n={success:!1,message:e},self.postMessage(n)}var c=a(u);if(!(n=t[o].check(c)).success)return self.postMessage(n);var f={success:n.success,data:c};self.postMessage(f)}}}}]),e}();e.default=n})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(0)],void 0===(o="function"==typeof(r=function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schema=t,this.rules=this.recursiveResolve(this.schema)}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(e,[{key:"recursiveResolve",value:function(e){var n=this,r={};return r=function e(r,i){var o=r.key,u=r.container,a=r.children,c=r.dynamic,f=r.list;return c&&(0,t.isArray)(f)&&f.forEach(function(t){return e(t,i)}),u&&(0,t.isArray)(a)?a.forEach(function(n){(0,t.isArray)(n.list)&&n.list.forEach(function(t){return e(t,i)})}):o in i?console.warn("".concat(o," is already in rules")):o&&(i[o]=n.resolve(r)),i}(e,r)}},{key:"resolve",value:function(n){for(var r=n.rules||[],i=[],o=r.length,u=0;u<o;u++)if(0===u)i.push(r[0]);else{var a=e.rules[r[u].type];(0,t.isFunction)(a)&&i.push(new a(r[u]).rule)}return i}}],[{key:"set",value:function(t){if(t){var n={};Object.keys(t).forEach(function(e){var r=t[e].type;if(r in n)return console.log("rule warning: ".concat(r," is already exist!"));n[r]=t[e]}),e.rules?Object.assign(e.rules,n):e.rules=n}}}]),e}();e.default=r,r.rules={}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(4),n(5)],void 0===(o="function"==typeof(r=function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,n){var r=n&&n.type?n.type:null,i=e&&(0,t.isNotEmptyString)(e.type)?e.type:null,o="string";return(0,t.isArray)(r)&&r.length?o=(0,t.include)(r,i)?i:r[0]:(0,t.isNotEmptyString)(r)&&(o=r),o}function c(e,t){var r=a(e,t);return n.default.resolve(r,!0)}Object.defineProperty(e,"__esModule",{value:!0}),e.getRootSchemaChildren=function(e){var n=[];if(!e||!e.container)return n;(0,t.isArray)(e.children)||(e.children=[]);var r=e.children[0];return r?((0,t.isArray)(r.list)||(r.list=[]),r.list):n},e.getFormData=function(e,r){var i={},o=["string","number","boolean"],a=function(e,r,i){return(0,t.include)(o,e)&&(0,t.include)(o,r)?e===r?i:n.default.convert["".concat(e,"2").concat(r)](i):i},c=function(e,r){if(!r.type)return e;var i=n.default.resolve(r.type);return(0,t.isArray)(e)?e.map(function(e){return a(u(e),i,e)}):a(u(e),i,e)},f=r.children;return(void 0===f?[]:f).forEach(function(t){t.list.forEach(function(t){Object.assign(i,function t(n,r){var i={},o=n.container,u=n.name,a=n.type,f=n.dynamic,s=n.list,l=void 0===s?[]:s,d=n.key,y=n.group,p=n.children;if(f)o?i[u]=l.map(function(e){return t(e,f)}):a&&(i[u]=l.map(function(t){return c(e[t.key],t)}));else if(o)if(y){var g={};p.forEach(function(e){e.list.forEach(function(e){Object.assign(g,t(e,!1))})}),r?Object.assign(i,g):i[u]=g}else p.forEach(function(e){e.list.forEach(function(e){Object.assign(i,t(e))})});else a&&(i[u]=c(e[d],n));return i}(t))})}),i},e.getSchema=function(e){if(!e)return{};var n=(0,t.jsonClone)(e);return function e(n){var r=n.option||{};for(var i in r)"dynamicData"===i&&(r[i]=[]),"columns"===i&&(0,t.isArray)(r[i])&&r[i].forEach(function(e){return delete e.__id});n.container&&(0,t.isArray)(n.children)&&n.children.forEach(function(n){(0,t.isArray)(n.list)&&n.list.forEach(function(t){return e(t)})})}(n),n},e.getParentListByKey=function(e,n){var r=n,i=null;if(e&&function e(t,n){if(n.container)for(var r=n.children,o=0;o<r.length;o++){for(var u=r[o],a=0;a<u.list.length;a++){var c=u.list[a];if(t===c.key){i=u.list;break}e(t,c)}if(i)break}}(e,r),!i){var o=r.children;(0,t.isArray)(o)&&o[0]&&(0,t.isArray)(o[0].list)&&(i=o[0].list)}return i},e.getIndexByKey=function(e,n){var r=-1;if((0,t.isNotEmptyString)(e)&&(0,t.isArray)(n))for(var i=0,o=n.length;i<o;i++)if(n[i].key===e){r=i;break}return r},e.replaceSchemaKey=function(e){return function e(n){var r=n.container,i=n.children;r&&(0,t.isArray)(i)&&i.forEach(function(n){(0,t.isArray)(n.list)&&n.list.forEach(function(t){return e(t)})}),n.key=(0,t.randomStr)(),n.name=n.key}(e),e},e.flattenSchema=function(e){var n={};return function e(n,r){var i=n||{},o=i.dynamic,u=i.list,a=i.container,c=i.children;o&&(0,t.isArray)(u)&&u.forEach(function(t){return e(t,r)}),a&&(0,t.isArray)(c)&&c.forEach(function(n){var i=n.list||[];i.forEach(function(n){var i=n.key;(0,t.isNotEmptyString)(i)&&void 0===r[i]&&(r[i]=n,e(n,r))})})}(e,n),n},e.getWidgetType=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=null;for(var i in e){var o=e[i].Schema;if((0,t.isFunction)(o)&&o.widget===n){r=o.type;break}}return r},e.getWidgetModel=function(e,n,r){if(!e||!(0,t.isNotEmptyString)(n.key))return{};var i=(0,t.isArray)(e)?e[0]:e,o=r.types[n.type||i],u=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n.key,"");return(0,t.isFunction)(o)&&(u[n.key]=o()),u},e.setKeyAndName=function(e,n,r){(0,t.isNotEmptyString)(e.key)?(n&&(e.key=(0,t.randomStr)()),e.name||(e.name=e.key)):(e.key=(0,t.randomStr)(),e.name||(e.name=e.key)),n&&!r&&(e.name=e.key)},e.mergeWidgets=function(e){var n=(0,t.isArray)(e)?i(e):[],r=Array.prototype.slice.call(arguments,1);return n.filter(function(e){return!(0,t.include)(r.map(function(e){return e.key}),e.key)}).concat(r)},e.mergeWidget=function(e,n){for(var r=!1,i=(0,t.isArray)(e)?e:[],o=0;o<i.length;o++){var u=i[o];(0,t.isArray)(u.widgets)||(u.widgets=[]);for(var a=0;a<u.widgets;a++){var c=n.Schema,f=u.widgets[a].Schema;if(c&&f&&c.widget===f.widget){r=!0,u.widgets[a]=n;break}}if(r)break}return r||(0===i.length&&i.push({title:"基础",key:"base",widgets:[n]}),(0,t.isArray)(i[0].widgets)?i[0].widgets.push(n):i[0].widgets=[n]),i},e.setValidators=function(e,n,r){if((0,t.isArray)(e)||!n)for(var i=0,o=e.length;i<o;i++){var u=e[i],a=u||{},c=a.widgets,f=void 0===c?[]:c;f.forEach(function(e){var i=function(i){if(!e.Schema||i!==e.Schema.widget)return"continue";var o=n[i];if(!(0,t.isArray)(o))return"continue";var u=e.Schema.validators||[];r?e.Schema.validators=o:(e.Schema.validators=u,o.forEach(function(e){(0,t.include)(u,e)||u.push(e)}))};for(var o in n)i(o)})}},e.getSchemaType=a,e.getRequiredRuleType=c,e.updateRequiredRule=function(e,n,i){if(e&&(0,t.isArray)(e.rules)){var o=e.rules[0];if(o){var u=i||{},a=u.type,f=r(u,["type"]),s=Object.assign({},o);if(a)s.type=a;else{var l=c(e,n);l&&(s.type=l)}e.rules.splice(0,1,Object.assign(s,f))}}},e.getRuleValidator=function(e,n){var r=e.message,i=e.required,o=[null,void 0,""];return function(e,u,a){if(e.message="",i)if((0,t.isArray)(u)){if(0===u.length)return a(new Error(r))}else if((0,t.include)(o,u))return a(new Error(r));if(!(0,t.include)(o,u)&&!(0,t.checkValueType)(u,n))return a(new Error("类型不匹配"));a()}},e.usePlugins=function(e,n){if(e&&(0,t.isArray)(n)){var r=e._installedPlugins;n.forEach(function(n){(0,t.isArray)(r)&&(0,t.include)(r,n)||e.use(n)})}},n=function(e){return e&&e.__esModule?e:{default:e}}(n)})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(18),n(19),n(20),n(21),n(22)],void 0===(o="function"==typeof(r=function(e,t,n,r,i,o){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"StringRule",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"NumberRule",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"EmailRule",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"URLRule",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"PatternRule",{enumerable:!0,get:function(){return o.default}}),t=u(t),n=u(n),r=u(r),i=u(i),o=u(o)})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.origin=Object.assign({},{type:"string",message:"字符串不符合规则"},t),this.rule={type:"string",trigger:"blur",message:""},this.update(this.origin)}return n(e,null,[{key:"type",get:function(){return"string"}},{key:"name",get:function(){return"字符串"}}]),n(e,[{key:"update",value:function(e){if(e){var t=e.min,n=e.max,r=parseInt(t),i=parseInt(n);this.rule.message=e.message,isNaN(r)?delete this.rule.min:this.rule.min=r,isNaN(i)?delete this.rule.max:this.rule.max=i}}}]),e}();e.default=r})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.origin=Object.assign({},{type:"number",trigger:"blur",message:"数字不正确"},t),this.rule={type:"number",trigger:"blur",message:""},this.update(this.origin)}return n(e,null,[{key:"type",get:function(){return"number"}},{key:"name",get:function(){return"数字"}}]),n(e,[{key:"update",value:function(e){if(e){this.rule.message=e.message;var t=e.min,n=e.max,r=parseFloat(t),i=parseFloat(n);isNaN(r)?delete this.rule.min:this.rule.min=r,isNaN(i)?delete this.rule.max:this.rule.max=i}}}]),e}();e.default=r})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.origin=Object.assign({},{type:"email",message:"邮箱格式不正确"},t),this.rule={type:"email",trigger:"blur",message:""},this.update(this.origin)}return n(e,null,[{key:"type",get:function(){return"email"}},{key:"name",get:function(){return"邮箱"}}]),n(e,[{key:"update",value:function(e){e&&(this.rule.message=e.message,Object.assign(this.origin,e))}}]),e}();e.default=r})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.origin=Object.assign({},{type:"url",message:"非法URL"},t),this.rule={type:"url",trigger:"blur",message:""},this.update(this.origin)}return n(e,null,[{key:"type",get:function(){return"url"}},{key:"name",get:function(){return"网址"}}]),n(e,[{key:"update",value:function(e){e&&(this.rule.message=e.message,Object.assign(this.origin,e))}}]),e}();e.default=r})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.origin=Object.assign({},{type:"pattern",pattern:"",message:"",ignoreCase:!1,global:!1,multiline:!1},t),this.rule={type:"pattern",trigger:"blur",pattern:new RegExp,message:""},this.update(this.origin)}return n(e,null,[{key:"type",get:function(){return"pattern"}},{key:"name",get:function(){return"正则表达式"}}]),n(e,[{key:"update",value:function(e){if(e){var t=e.pattern,n=e.ignoreCase,r=e.global,i=e.multiline;this.rule.message=e.message;var o=[n?"i":"",r?"g":"",i?"m":""].join(""),u=new RegExp;if("string"==typeof t&&t.length)try{u=new RegExp(e.pattern,o)}catch(e){}this.rule.pattern=u}}}]),e}();e.default=r})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(0)],void 0===(o="function"==typeof(r=function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$events={}}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(e,[{key:"on",value:function(e,n,r){e in this.$events||(this.$events[e]=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,[r])),n in this.$events[e]||(this.$events[e][n]=[r]);var i=this.$events[e][n];return(0,t.include)(i,r)||this.$events[e][n].push(r),this}},{key:"off",value:function(e,t,n){if(e in this.$events)if(t in this.$events[e]){var r=this.$events[e][t],i=r.indexOf(n);i>-1?r.splice(i,1):this.$events[e][t]=[]}else void 0===t&&delete this.$events[e];return this}}]),e}();e.default=r})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(25),n(3),n(6),n(0),n(8)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,u){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=a(t),r=a(r),i=a(i);var s=n(30),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$$store={},this.$$types=Object.assign({},i.default),this.$$init(t)}return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(e,[{key:"$$init",value:function(e){this.$$store=new s.Store(new t.default({Rule:e.Rule||r.default}))}},{key:"getState",value:function(){return this.$$store.state}},{key:"getTab",value:function(){return this.$$store.state.tab}},{key:"getFormData",value:function(){var e=this.$$store.state,t=e.model,n=e.rootSchema;return(0,o.getFormData)(t,n)}},{key:"getSchema",value:function(){var e=this.$$store.state.rootSchema;return(0,o.getSchema)(e)}},{key:"getSelectedSchema",value:function(){return this.$$store.state.selectedSchema}},{key:"getRootSchema",value:function(){return this.$$store.state.rootSchema}},{key:"getModel",value:function(e){return e?"string"==typeof e?this.$$store.state.model[e]:void 0:this.$$store.state.model}},{key:"updateModel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$$store.commit(this.$$types.$MODEL_SET,{model:e})}},{key:"resetModel",value:function(){var e=this.$$store.state.model,t={};for(var n in e){var r=c(e[n]);switch(r){case"string":t[n]="";break;case"number":t[n]=0;break;case"boolean":t[n]=!1;break;case"object":t[n]=(0,o.isArray)(e[n])?[]:{};break;default:t[n]=t[n]}}this.$$store.commit(this.$$types.$MODEL_SET,{model:t})}},{key:"getWidgets",value:function(){return this.$$store.state.widgets}},{key:"getFlatSchemas",value:function(){return this.$$store.state.flatSchemas}},{key:"getFlatRules",value:function(){return this.$$store.state.flatRules}},{key:"getFormRules",value:function(){var e=this.$$store.state,t=e.flatSchemas,n=e.flatRules,r={};for(var i in t)t[i].hidden||(r[i]=n[i]);return r}},{key:"isSelected",value:function(){return this.$$store.getters.isSelected}},{key:"getFlatWidgets",value:function(){return this.$$store.getters.flatWidgets}},{key:"getSettingWidget",value:function(){return this.$$store.getters.settingWidget}},{key:"getWidgetsValidators",value:function(){return this.$$store.getters.widgetsValidators}},{key:"updateTab",value:function(e){(0,o.isNotEmptyString)(e)&&this.$$store.commit(this.$$types.$TAB_UPDATE,{tab:e})}},{key:"initRootSchema",value:function(e){this.$$store.commit(this.$$types.$ROOT_SCHEMA_SET,{rootSchema:e})}},{key:"initWidgets",value:function(e){if(!(0,o.isArray)(e))return console.warning("widgets should be type of array");this.$$store.commit(this.$$types.$WIDGETS_SET,{widgets:e})}},{key:"updateMode",value:function(e){if(!(0,o.include)((0,u.modes)(),e))return console.warning("mode must be one of ".concat((0,u.modes)().toString()));this.$$store.commit(this.$$types.$MODE_CHANGE,{mode:e})}},{key:"addWidget",value:function(e){if(!(0,o.isNotEmptyString)(e))return console.warning("widget should be a non-empty string");this.$$store.commit(this.$$types.$WIDGET_ADD,{widget:e})}},{key:"dynamicAddWidget",value:function(e){if(!(0,o.isNotEmptyString)(e))return console.warning("key should be a non-empty string");this.$$store.commit(this.$$types.$WIDGET_DYNAMIC_ADD,{key:e})}},{key:"dynamicRemoveWidget",value:function(e,t){if(!(0,o.isNotEmptyString)(e))return console.warning("key should be a non-empty string");this.$$store.commit(this.$$types.$WIDGET_DYNAMIC_REMOVE,{key:e,index:t})}},{key:"copyWidget",value:function(e){(0,o.isNotEmptyString)(e)&&this.$$store.commit(this.$$types.$WIDGET_COPY,{key:e})}},{key:"removeWidget",value:function(e){(0,o.isNotEmptyString)(e)&&this.$$store.commit(this.$$types.$WIDGET_REMOVE,{key:e})}},{key:"selectWidget",value:function(e){(0,o.isNotEmptyString)(e)&&this.$$store.commit(this.$$types.$WIDGET_SELECT,{key:e})}},{key:"deselectWidget",value:function(){this.$$store.commit(this.$$types.$WIDGET_DESELECT)}},{key:"updateWidgetType",value:function(e,t){(0,o.isNotEmptyString)(e)&&(0,o.isNotEmptyString)(t)&&this.$$store.commit(this.$$types.$WIDGET_TYPE_UPDATE,{key:e,type:t})}},{key:"updateWidgetOption",value:function(e,t){(0,o.isNotEmptyString)(e)&&t&&this.$$store.commit(this.$$types.$WIDGET_OPTION_UPDATE,{key:e,option:t})}},{key:"addWidgetChild",value:function(e,t,n){!(0,o.isNotEmptyString)(e)||t<0||!n||this.$$store.commit(this.$$types.$WIDGET_CHILD_ADD,{key:e,index:t,child:n})}},{key:"removeWidgetChild",value:function(e,t){(0,o.isNotEmptyString)(e)&&this.$$store.commit(this.$$types.$WIDGET_CHILD_REMOVE,{key:e,index:t})}},{key:"moveWidgetChild",value:function(e,t,n){!(0,o.isNotEmptyString)(e)||t<0||n<0||this.$$store.commit(this.$$types.$WIDGET_CHILD_MOVE,{key:e,preIndex:t,index:n})}},{key:"updateWidgetByModel",value:function(e){this.$$store.commit(this.$$types.$WIDGET_UPDATE_BY_VALUE_LOGIC,{model:e})}},{key:"updateWidgetByEvent",value:function(e,t){this.$$store.commit(this.$$types.$WIDGET_UPDATE_BY_EVENT_LOGIC,{key:e,eventType:t})}},{key:"initRule",value:function(e){this.$$store.commit(this.$$types.$RULE_INIT,{rootSchema:e})}},{key:"addRule",value:function(e){(0,o.isNotEmptyString)(e)&&this.$$store.commit(this.$$types.$RULE_ADD,{key:e})}},{key:"removeRule",value:function(e,t){(0,o.isNotEmptyString)(e)&&this.$$store.commit(this.$$types.$RULE_REMOVE,{key:e,index:t})}},{key:"updateRule",value:function(e,t,n){if((0,o.isNotEmptyString)(e)&&"number"==typeof t&&"object"===c(n)){var r=n.type,i=n.message;if(0===t)this.$$store.commit(this.$$types.$RULE_REQUIRED_RULE_UPDATE,{key:e,rule:n});else if((0,o.isNotEmptyString)(r)){if(this.$$store.commit(this.$$types.$RULE_TYPE_UPDATE,{key:e,index:t,type:r}),!(0,o.isNotEmptyString)(i))return;this.$$store.commit(this.$$types.$RULE_MESSAGE_UPDATE,{key:e,index:t,message:i})}else{if(!(0,o.isNotEmptyString)(i))return;this.$$store.commit(this.$$types.$RULE_MESSAGE_UPDATE,{key:e,index:t,message:i})}}}},{key:"addLogic",value:function(e){e&&this.$$store.commit(this.$$types.$LOGIC_ADD,{logic:e})}},{key:"updateLogic",value:function(e,t){e<0||!t||this.$$store.commit(this.$$types.$LOGIC_UPDATE,{index:e,logic:t})}},{key:"removeLogic",value:function(e){e<0||this.$$store.commit(this.$$types.$LOGIC_DELETE,{index:e})}}]),e}();e.default=l})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(6),n(5),n(7),n(9),n(10),n(0)],void 0===(o="function"==typeof(r=function(e,t,n,r,i,o,u){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=a(t),n=a(n),i=a(i);var y=new((o=a(o)).default),p=new n.default,g=new i.default,h=(0,r.defaultSchema)();e.default=function e(o){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var f=(o||{}).Rule;return{state:{tab:"",mode:"edit",selectedSchema:h,rootSchema:g,model:{},widgets:[],flatSchemas:{},flatRules:{}},getters:{isSelected:function(e){return!!e.selectedSchema.key},flatWidgets:function(e){var t=e.widgets,n={};return(0,u.isArray)(t)?(t.forEach(function(e){(0,u.isArray)(e.widgets)&&e.widgets.forEach(function(e){(0,u.isFunction)(e.Schema)&&(n[e.Schema.widget]=e)})}),n):n},settingWidget:function(e,t){var n=e.selectedSchema,r=n.widget,i=n.key,o=t.flatWidgets[r]||null;return i&&o?o.Setting:null},widgetsValidators:function(e,t){var n=t.flatWidgets,r={},i=function(e){var t=n[e].Schema;if(!(0,u.isFunction)(t)||!(0,u.isArray)(t.validators))return"continue";r[e]=[],t.validators.forEach(function(t){var n=f.rules[t];if(!n)return console.log("validator ".concat(t," is not exist"));r[e].push(n)})};for(var o in n)i(o);return r}},mutations:(a={},d(a,t.default.$TAB_UPDATE,function(e,t){var n=t.tab;n&&"string"==typeof n&&(e.tab=n)}),d(a,t.default.$RULE_INIT,function(e,t){var n=t.rootSchema;e.flatRules=new f(n).rules}),d(a,t.default.$ROOT_SCHEMA_FLAT,function(e,t){var n=t.rootSchema;e.flatSchemas=(0,u.flattenSchema)(n)}),d(a,t.default.$ROOT_SCHEMA_SET,function(e,n){var r=n.rootSchema,o=this.getters.flatWidgets,a={},c=new i.default({schema:r,widgets:o});for(var f in e.rootSchema=Object.assign({},e.rootSchema,c),this.commit(t.default.$ROOT_SCHEMA_FLAT,{rootSchema:e.rootSchema}),this.commit(t.default.$RULE_INIT,{rootSchema:e.rootSchema}),e.flatSchemas)if(!(f in e.model)){var s=e.flatSchemas[f];if(s.container)continue;var l=(0,u.getWidgetType)(o,s.widget),d=(0,u.getWidgetModel)(l,s,p);Object.assign(a,d)}this.commit(t.default.$MODEL_SET,{model:a})}),d(a,t.default.$MODE_CHANGE,function(e,t){var n=t.mode;e.mode=n}),d(a,t.default.$MODEL_SET,function(e,t){var n=t.model,r={},i=Object.assign({},e.model,n),o=e.flatSchemas,a=this.getters.flatWidgets;for(var c in i){var f=o[c];if(f){var s=a[f.widget];s&&(0,u.isFunction)(s.Schema)&&(0,u.checkValueType)(i[c],s.Schema.type,f.dynamic)&&(r[c]=i[c])}}e.model=r}),d(a,t.default.$WIDGETS_SET,function(e,t){var n=t.widgets;e.widgets=n}),d(a,t.default.$WIDGET_UPDATE_BY_VALUE_LOGIC,function(e,t){var n=t.model,r=e.rootSchema.logics.filter(function(e){return e.key&&"value"===e.type}),i=y.diffValueLogics(r,n);y.applyPatches(e.flatSchemas,i)}),d(a,t.default.$WIDGET_UPDATE_BY_EVENT_LOGIC,function(e,t){var n=t.key,r=t.eventType,i=e.rootSchema.logics.filter(function(e){return e.key===n&&"event"===e.type}),o=y.diffEventLogics(i,r);y.applyPatches(e.flatSchemas,o)}),d(a,t.default.$WIDGET_ADD,function(e,n){var r=n.widget,i=e.selectedSchema,o=e.rootSchema,a=this.getters,c=a.flatWidgets,f=a.isSelected,s=c[r].Schema;if(!(0,u.isFunction)(s))return console.error("Schema should be a constructor");var l=[],d=new s({widgets:c});if(f){l=(0,u.getParentListByKey)(i.key,o);var y=(0,u.getIndexByKey)(i.key,l);l.splice(y+1,0,d)}else(l=(0,u.getRootSchemaChildren)(o)).push(d);this.commit(t.default.$ROOT_SCHEMA_FLAT,{rootSchema:Object.assign({},o)}),this.commit(t.default.$RULE_INIT,{rootSchema:Object.assign({},o)});var g=(0,u.getWidgetType)(c,d.widget),h=(0,u.getWidgetModel)(g,d,p);this.commit(t.default.$MODEL_SET,{model:h}),e.selectedSchema=d}),d(a,t.default.$WIDGET_DYNAMIC_ADD,function(e,t){var n=t.key,r=this.getters.flatWidgets,i=e.flatSchemas,o=i[n],a=r[o.widget].Schema,c=Object.assign({},o,{list:[],dynamic:!1}),s=new a({schema:c,widgets:r,clone:!0,dynamic:!0});s.dynamic=!1;var y=(0,u.flattenSchema)(s),g=new f(s).rules;o.list.push(s);var h=l(d({},s.key,s),y);e.flatSchemas=Object.assign({},e.flatSchemas,h),e.flatRules=Object.assign({},e.flatRules,l(l({},g),{},d({},s.key,s.rules)));var m={};for(var b in(0,u.isArray)(e.model[n])||(m[n]=[]),h){var v=h[b],E=v.type,O=v.key,_=p.types[E];E&&(0,u.isFunction)(_)&&(m[O]=_())}e.model=Object.assign({},e.model,m)}),d(a,t.default.$WIDGET_DYNAMIC_REMOVE,function(e,t){var n=t.key,r=t.index,i=e.flatSchemas,o=e.flatRules,u=e.model,a=i[n],c=a.list.splice(r,1)[0],f=c.key;delete i[f],delete o[f],delete u[f],e.flatSchemas=Object.assign({},i),e.flatRules=Object.assign({},o),e.model=Object.assign({},u)}),d(a,t.default.$WIDGET_COPY,function(e,n){var r=n.key,i=e.flatSchemas,o=e.rootSchema,a=i[r],c=this.getters.flatWidgets,f=c[a.widget].Schema,s=(0,u.getParentListByKey)(r,o),l=(0,u.getIndexByKey)(r,s),d=new f({schema:a,widgets:c,clone:!0});s.splice(l+1,0,d),this.commit(t.default.$ROOT_SCHEMA_FLAT,{rootSchema:Object.assign({},o)}),this.commit(t.default.$RULE_INIT,{rootSchema:Object.assign({},o)});var y=(0,u.getWidgetType)(c,d.widget),g=(0,u.getWidgetModel)(y,d,p);this.commit(t.default.$MODEL_SET,{model:g}),e.selectedSchema=d}),d(a,t.default.$WIDGET_REMOVE,function(e,n){var r=n.key,i=(0,u.getParentListByKey)(r,e.rootSchema),o=(0,u.getIndexByKey)(r,i),a=Object.assign({},e.model);(0,u.isNotEmptyString)(r)&&(delete a[r],e.model=a),i.splice(o,1),this.commit(t.default.$ROOT_SCHEMA_FLAT,{rootSchema:Object.assign({},e.rootSchema)}),this.commit(t.default.$RULE_INIT,{rootSchema:Object.assign({},e.rootSchema)}),this.commit(t.default.$WIDGET_DESELECT)}),d(a,t.default.$WIDGET_TYPE_UPDATE,function(e,t){var r=e.model,i=e.flatSchemas,o=t.key,a=t.type,c=i[o],f=c.widget,s=this.getters.flatWidgets,l=(0,u.getWidgetType)(s,f),d=s[f].Schema;if(l&&a)if((0,u.updateRequiredRule)(c,d,{type:n.default.resolve(a,!0)}),(0,u.isArray)(l)){if(!(0,u.include)(l,a))return console.warn("".concat(a,"不是widget(").concat(f,")值类型"));c.type=a;var y=r[o];if((0,u.include)(a,"array")){if((0,u.isArray)(y))return;r[o]=[]}else{var g=p.types[a];(0,u.isArray)(y)&&(0,u.isFunction)(g)&&(r[o]=g())}}else c.type=a}),d(a,t.default.$WIDGET_OPTION_UPDATE,function(e,t){var n=e.flatSchemas,r=t.key,i=t.option,o=n[r];o&&i&&(o.option=Object.assign(l({},o.option),i))}),d(a,t.default.$WIDGET_SELECT,function(e,t){var n=t.key,r=e.flatSchemas[n],i=e.selectedSchema.key===n;"design"===e.tab&&!i&&r&&(e.selectedSchema=r)}),d(a,t.default.$WIDGET_DESELECT,function(e){e.selectedSchema=(0,r.defaultSchema)()}),d(a,t.default.$RULE_TYPE_UPDATE,function(e,t){var n=e.flatRules,r=e.flatSchemas,i=t.key,o=t.type,a=t.index,f=r[i],s=this.getters.widgetsValidators,l=s[f.widget];if((0,u.isArray)(l)){var d=l.find(function(e){return e.type===o});if((0,u.isFunction)(d)){var y=(new d).rule,p=n[i],g=c(f.rules);p.splice(a,1,y),g.splice(a,1,{message:y.message,type:o}),f.rules=g}}}),d(a,t.default.$RULE_REQUIRED_RULE_UPDATE,function(e,t){e.flatRules;var n=e.flatSchemas,r=t.key,i=t.rule,o=n[r],a=this.getters.flatWidgets[o.widget].Schema;(0,u.updateRequiredRule)(o,a,i)}),d(a,t.default.$RULE_MESSAGE_UPDATE,function(e,t){var n=e.flatRules,r=t.key,i=t.index,o=t.message,u=n[r];Array.isArray(u)&&(u[i].message=o)}),d(a,t.default.$RULE_ADD,function(e,t){var n=e.flatSchemas,r=t.key,i=n[r];i.rules.push({type:"",message:""})}),d(a,t.default.$RULE_REMOVE,function(e,t){var n=e.flatRules,r=e.flatSchemas,i=t.key,o=t.index,u=r[i],a=n[i];u.rules.splice(o,1),a&&a.splice(o,1)}),d(a,t.default.$WIDGET_CHILD_ADD,function(e,t){var n=e.flatSchemas,r=t.key,i=t.index,o=t.child,u=n[r];u.children.splice(i+1,0,o)}),d(a,t.default.$WIDGET_CHILD_REMOVE,function(e,t){var n=e.flatSchemas,r=t.key,i=t.index,o=n[r];o.children.splice(i,1)}),d(a,t.default.$WIDGET_CHILD_MOVE,function(e,t){var n=e.flatSchemas,r=t.key,i=t.preIndex,o=t.index,u=n[r],a=c(u.children);a.splice.apply(a,[i,1].concat(c(a.splice(o,1,a[i])))),u.children=a}),d(a,t.default.$LOGIC_ADD,function(e,t){var n=e.rootSchema,r=t.logic;(0,u.isArray)(n.logics)?n.logics.push(r):n.logics=[r]}),d(a,t.default.$LOGIC_UPDATE,function(e,t){var n=e.rootSchema,r=t.logic,i=t.index;n.logics.splice(i,1,r)}),d(a,t.default.$LOGIC_DELETE,function(e,t){var n=e.rootSchema,r=t.index;n.logics.splice(r,1)}),a),actions:{},modules:{}}}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(){return{key:"",type:"object",widget:""}}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(1),n(0)],void 0===(o="function"==typeof(r=function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,n)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=function(){return[{span:12,list:[]},{span:12,list:[]}]},f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,e);var t=u(r);function r(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(n=t.call(this)).label="布局",n.container=!0,n.children=c(),n.option={gutter:0,align:"top",justify:"start"},n.create(e),n.createChildren(e),n}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(r,[{key:"createChildren",value:function(e){var t=e||{},r=t.schema,i=t.widgets,o=void 0===i?{}:i,u=t.clone,a=t.dynamic;if((0,n.isPlainObject)(r)&&(0,n.isNotEmptyString)(r.widget)){r=(0,n.jsonClone)(r);var f=(0,n.isArray)(r.children)?r.children:[];f.length||f.push(c()),f.forEach(function(e){(!(0,n.isNumber)(e.span)||e.span<0)&&(e.span=12);var t=[];(0,n.isArray)(e.list)&&e.list.forEach(function(e){var r=o[e.widget];if(r&&(0,n.isFunction)(r.Schema)){var i=new r.Schema({schema:e,widgets:o,clone:u,dynamic:a});t.push(i)}}),e.list=t}),this.children=f}}}]),r}((t=function(e){return e&&e.__esModule?e:{default:e}}(t)).default);e.default=f,Object.assign(f,{title:"栅格",widget:"grid",icon:"grid",logic:{value:[],event:[]}})})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.key=t,this.value=n}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(11),n(12)],void 0===(o="function"==typeof(r=function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=r(t),n=r(n);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map={event:new t.default,value:new n.default}}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"diffValueLogics",value:function(e,t){for(var n=this,r=[],i=0;i<e.length;i++){var o=e[i],u=this.map.value.map[o.action];if(u)for(var a in t)if(a===o.key){var c=u.validator(t[a],o.value),f={};if(c){for(var s=function(e){var t=o.effects[e],r={};if(!n.checkEffect(t,o.key))return"continue";t.properties.forEach(function(e){r[e.key]=e.value}),f[t.key]=r},l=0;l<o.effects.length;l++)s(l);Object.keys(f).length&&r.push(f)}}}return r}},{key:"diffEventLogics",value:function(e,t){for(var n=this,r=[],i=0;i<e.length;i++){var o=e[i],u={};if(o.action===t.slice(3)){for(var a=function(e){var t=o.effects[e],r={};if(!n.checkEffect(t,o.key))return"continue";t.properties.forEach(function(e){r[e.key]=e.value}),u[t.key]=r},c=0;c<o.effects.length;c++)a(c);Object.keys(u).length&&r.push(u)}}return r}},{key:"applyPatches",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.forEach(function(t){for(var n in t)Object.assign(e[n],t[n])})}},{key:"checkEffect",value:function(e,t){return e.key&&t!==e.key&&Array.isArray(e.properties)}}]),e}();e.default=o})?r.apply(t,i):r)||(e.exports=o)},function(t,n){t.exports=e},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(1),n(32),n(9)],void 0===(o="function"==typeof(r=function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BaseSchema",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"FormSchema",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"RootSchema",{enumerable:!0,get:function(){return r.default}}),t=i(t),n=i(n),r=i(r)})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[t,n(1),n(0)],void 0===(o="function"==typeof(r=function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}(this,n)}}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var r=u(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var i=e||{},o=i.schema,u=i.widgets,f=void 0===u?{}:u;return(t=r.call(this)).name="",t.type=(0,n.getSchemaType)(o,this instanceof c?this.constructor:void 0),t.label="",t.description="",t.help="",t.disabled=!1,t.rules=[{required:!1,message:"必填",type:"string",trigger:"blur"}],t.create(e),f[t.widget]&&(0,n.updateRequiredRule)(a(t),f[t.widget].Schema),t}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(c,[{key:"create",value:function(e){var r=e||{},i=r.clone,o=r.dynamic;t.default.prototype.create.call(this,e),(0,n.setKeyAndName)(this,i,o)}},{key:"updateRequiredRule",value:function(e,t){(0,n.updateRequiredRule)(this,t,e)}}]),c}((t=function(e){return e&&e.__esModule?e:{default:e}}(t)).default);e.default=f})?r.apply(t,i):r)||(e.exports=o)}])});